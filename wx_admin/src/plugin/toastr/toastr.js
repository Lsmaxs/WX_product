define(function(require,exports,module){var a=jQuery=require("jquery");module.exports=function(){var b,c,d,e=0,f={error:"error",info:"info",success:"success",warning:"warning"},g={clear:l,remove:m,error:j,getContainer:n,info:h,options:{},subscribe:o,success:k,version:"2.1.2",warning:i};function h(a,b,c){return u({type:f.info,iconClass:w().iconClasses.info,message:a,optionsOverride:c,title:b})}function i(a,b,c){return u({type:f.warning,iconClass:w().iconClasses.warning,message:a,optionsOverride:c,title:b})}function j(a,b,c){return u({type:f.error,iconClass:w().iconClasses.error,message:a,optionsOverride:c,title:b})}function k(a,b,c){return u({type:f.success,iconClass:w().iconClasses.success,message:a,optionsOverride:c,title:b})}function l(a,c){var d=w();b||n(d),q(a,d,c)||p(d)}function m(c){var d=w();return b||n(d),c&&0===a(":focus",c).length?void x(c):void(b.children().length&&b.remove())}function n(c,d){return c||(c=w()),b=a("#"+c.containerId),b.length?b:(d&&(b=r(c)),b)}function o(a){c=a}function p(c){for(var d=b.children(),e=d.length-1;e>=0;e--)q(a(d[e]),c)}function q(b,c,d){var e=d&&d.force?d.force:!1;return b&&(e||0===a(":focus",b).length)?(b[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){x(b)}}),!0):!1}function r(c){return b=a("<div/>").attr("id",c.containerId).addClass(c.positionClass).attr("aria-live","polite").attr("role","alert"),b.appendTo(a(c.target)),b}function s(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function t(a){c&&c(a)}function u(c){var d=w(),f=c.iconClass||d.iconClass;if("undefined"!=typeof c.optionsOverride&&(d=a.extend(d,c.optionsOverride),f=c.optionsOverride.iconClass||f),!v(d,c)){e++,b=n(d,!0);var g=null,h=a("<div/>"),i=a("<div/>"),j=a("<div/>"),k=a("<div/>"),l=a(d.closeHtml),m={intervalId:null,hideEta:null,maxHideTime:null},o={toastId:e,state:"visible",startTime:new Date,options:d,map:c};q(),C(),B(),t(o),d.debug&&console&&console.log(o);function p(a){return null==a&&(a=""),new String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function q(){r(),u(),y(),z(),A(),s()}function r(){c.iconClass&&h.addClass(d.toastClass).addClass(f)}function s(){d.newestOnTop?b.prepend(h):b.append(h)}function u(){c.title&&(i.append(d.escapeHtml?p(c.title):c.title).addClass(d.titleClass),h.append(i))}function y(){c.message&&(j.append(d.escapeHtml?p(c.message):c.message).addClass(d.messageClass),h.append(j))}function z(){d.closeButton&&(l.addClass("toast-close-button").attr("role","button"),h.prepend(l))}function A(){d.progressBar&&(k.addClass("toast-progress"),h.prepend(k))}function B(){h.hover(F,E),!d.onclick&&d.tapToDismiss&&h.click(D),d.closeButton&&l&&l.click(function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&a.cancelBubble!==!0&&(a.cancelBubble=!0),D(!0)}),d.onclick&&h.click(function(a){d.onclick(a),D()})}function C(){h.hide(),h[d.showMethod]({duration:d.showDuration,easing:d.showEasing,complete:d.onShown}),d.timeOut>0&&(g=setTimeout(D,d.timeOut),m.maxHideTime=parseFloat(d.timeOut),m.hideEta=(new Date).getTime()+m.maxHideTime,d.progressBar&&(m.intervalId=setInterval(G,10)))}function D(b){var c=b&&d.closeMethod!==!1?d.closeMethod:d.hideMethod,e=b&&d.closeDuration!==!1?d.closeDuration:d.hideDuration,f=b&&d.closeEasing!==!1?d.closeEasing:d.hideEasing;return!a(":focus",h).length||b?(clearTimeout(m.intervalId),h[c]({duration:e,easing:f,complete:function(){x(h),d.onHidden&&"hidden"!==o.state&&d.onHidden(),o.state="hidden",o.endTime=new Date,t(o)}})):void 0}function E(){(d.timeOut>0||d.extendedTimeOut>0)&&(g=setTimeout(D,d.extendedTimeOut),m.maxHideTime=parseFloat(d.extendedTimeOut),m.hideEta=(new Date).getTime()+m.maxHideTime)}function F(){clearTimeout(g),m.hideEta=0,h.stop(!0,!0)[d.showMethod]({duration:d.showDuration,easing:d.showEasing})}function G(){var a=(m.hideEta-(new Date).getTime())/m.maxHideTime*100;k.width(a+"%")}return h}}function v(a,b){if(a.preventDuplicates){if(b.message===d)return!0;d=b.message}return!1}function w(){return a.extend({},s(),g.options)}function x(a){b||(b=n()),a.is(":visible")||(a.remove(),a=null,0===b.children().length&&(b.remove(),d=void 0))}return g}()});