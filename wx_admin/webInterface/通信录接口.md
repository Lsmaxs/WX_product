# 通讯录接口文档  

## 1.区域选择接口

> 用于获取区域

### 接口：
 POST   
>  /school/getAreas

### 请求参数：

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 areaCode | string | 地域编码   |  true   | 0 | 根据值查询后面的地区


### 响应：

>  响应格式：JSON

#### 成功：200 

```
{
    bizData:{
        lists:[
            {
              "code":{string}, //110000
              "id":{number}, //7051
              "name":{string} //北京市 
            },
            {
                "code":{string}, //120000
                "id":{number} //7072
                "name":{string} //天津市
            }
            ...
        ]
    },
    rtnCode:{string}, //0000000
    ts:{number}//1481264709800
}
```

#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}
```

---
## 2.获取学校信息接口

> 根据获取的areaCode获取学校信息

### 接口:
POST
> /school/getAllBindSchoolList

### 请求参数:

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 areaCode | string | 地域编码   |  true   | 0 | 根据值查询该地区学校

### 响应:

>  响应格式：JSON

#### 成功：200 
```
{
    bizData：[
        {
            "appInfoList":[
                "appAdminAddr":{string}, //http://www.weixiao100.cn
                "appDesc":{string},  //学校可对家长发起问卷调查，支持在手机端及PC端统计问卷调查情况
                "appId":{number}, //2
                "appLogo":{string}, //http://ks3.weixiao100.cn/yyhd/fronts/app/images/survey.png
                "appName":{string}, //校务-问卷调查
                "callBackUrl":{string}, //http://www.weixiao100.cn/xywh/survey/deal
                "createDateAsDate":{number}, //1481264709993
                "creator":{number}, //10000
                "id":{number}, //14
                "isReportEnter":{string}, //1
                "lastModDate":{number}, //1481264709985
                "lastModDateAsDate":{number}, //1481264709985
                "lastModifier":{number}, //10000
                "redirectDomain":{string}, //www.weixiao100.cn
                "status":{number}, //1
                "suiteId":{string}, //tjd64faf132f3c2dfa
            ],
            "areaAddr":{string}, //北京市-市辖区-海淀区
            "areaCode":{string}, //110108
            "id":{number}, //148
            "isbind":{number}, //0
            "schoolCode":{string}, //test001
            "schoolName":{string}, //{string}//测试学校
        },
        ...
    ],
    rtnCode:{string}, //000000
    ts:{number}//1481264709800
}
```
---
## 3.获取学校人员树形接口

> 根据获取的schoolCode获取学校通讯录人员树形图名单

### 接口:
POST
> /addressBook/queryAddressBookLocal

### 请求参数:

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | "" | 根据值查询人员名单
 

### 响应:

>  响应格式：JSON

#### 成功：200 
```
{
    bizData:[
        {
            "departmentType":{string}, //部门等级 eg：1 
            "id":{string}, //test001
            "name":{string}, //测试学校
            "order":{string}, //其他类别 未知用处 eg: 1
            "parentid":{string}, //所属父级id eg: 0
        },
        {
            "departmentType":{string}, //部门等级 eg：2
            "id":{string}, //10000,
            "name":{string}, //老师,
            "order":{string}, //其他类别 未知用处 eg:1,
            "parentid": {string}, //所属父级id eg:test001
        },
        {
            "clazzAlias": {string}, //班级别名 eg:管理员,
            "departmentType": {string}, //部门等级 eg：2
            "id": {string}, //20009,
            "name": {string}, //管理员,
            "order": {string}, //其他类别 未知用处 eg:20009,
            "parentid":{string}, //所属父级id eg:10000
        },
        {
            "departmentType": {string}, //部门等级 eg：3,
            "id":{string}, //20000,
            "name":{string}, //家长,
            "order": {string}, //其他类别 未知用处 eg:20000,
            "parentid": {string}, //所属父级id eg:test001
        },
        ...
    ],
    rtnCode:{string}, //000000
    ts:{number}//1481264709800
}
```
 
```
graph LR
学校-->老师
老师-->音乐老师/管理员
学校-->家长
家长-->年级
年级-->班级

```
#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}
```
---
## 4.获取详细用户信息列表接口

> 根据分组节点查询详细用户

### 接口:
POST
> /addressBook/queryMembersLocal

### 请求参数:

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | "" | 根据值查询人员名单
 departmentType | string | 权限等级   |  true   | "" | 分组的等级
 page | number | 页数   |  true   | 1 | 当前页数
 pageSize | number | 本页数量   |  true   | 10 | 显示的当页列数
 userStatus | string | 关注状态   |  true   | "0" | 用户是否已经关注 1 已关注 2 未关注
 weiXinId | string | 当前分组ID   |  true   | "" | 当前分组ID
 searchContent | string | 搜索内容   |  false   | "" | 根据值搜索人员

### 响应:

>  响应格式：JSON

#### 成功：200 
```
{
    "bizData": {
        "conditions":{object}, //状态
        "page":{number}, //当前页数 1
        "pagesize":{number}, //显示人员数量即rows返回个数 10
        "records":{number}, //总人数 171
        "total":{number}, //总页数 18
        "rows":[
            {
                "attention":{string}, //是否关注 1为关注 4为未关注
                "mobile":{string}, //电话号码 13410138010",
                "name": {string}, //郑1家长,
                "synchro":{string}, //同步  用处未知 "1",
                "teachParentFlag":{string}, //身份代码 "1"为家长 "2"为老师 "3"为家长/老师,
                "usDisplayName":{string}, //所属关系或别名 "郑1家长x",
                "userid":{string}, // "003857f4f56a11e58cc6fa163e37f8a9"
            },
            ...
        ]
    },
    "rtnCode": "0000000",
    "ts": 1481274300592
}
```

#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}
```