# 通讯录新增人员接口文档  

## 1.新增家长

> 新增家长即对应学生

### 接口：
 POST   
>  /school/addStudentOrParents?schoolCode=

### 请求参数：

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 classWeixinId | string | 所在班级编码   |  true   | --- | ---
 schoolCode | string | 所在学校编码   |  true   | --- | ---
 studentName | string | 学生姓名   |  true   | --- | ---
 studentNo | string | 学生学号   |  false   | --- | ---
 email | string | 学生邮箱   |  false   | --- | ---
 phoneNum | string | 学生手机   |  false   | --- | ---
 parentList | array | 家长列表   |  true   | --- | 见下面的表格参数

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 parentName | string | 家长姓名   |  true   | --- | ---
 phoneNum | string | 家长姓名   |  true   | --- | ---
 relationCode | string | 亲属关系代码   |  true  | --- | ---
 weixin | string | 家长微信号   |  false   | --- | ---
 email | string | 家长邮箱   |  false   | --- | ---

### 响应：

>  响应格式：JSON

#### 成功：200 

```
{
    "bizData": {
        "phone": {string}, //13785623965
        "studentNo":{string}, //学生学号 14453217336499066
        "uid":{string}, //学生ID 36f50a1a996544248ef847e9bca25c56
        "email":{string}, // shuan154612@qq.com
        "name":{string}, //学生姓名 士大夫
        "parents": [
            {
                "name":{string}, // 陈乌
                "phone":{string}, // 13750486503,
                "relation": {  // 亲属关系 
                    "code":{string}, //亲属代码 29,
                    "id":{string}, //亲属代码ID  519,
                    "name":{string}, //  "其他子"
                },
                "sex":{string}, // 0,
                "uid":{string}, //家长ID  5f8fede9b8f046ffa4ed2f3e1977,
                "usDisplayName": {string}, //家长别名 陈乌,
                "weixinId":{string}, //家长微信号  457841132
            }
        ],
        "classInfo": {
            "aliasName":{string}, //班级别名 小一(991)班,
            "classOrder":{string}, // 99,
            "code":{string}, //班级ID 14453217336147470,
            "gradeCode":{string}, //年纪编码 201,
            "id":{string}, //未知ID 可能是学生加入ID还没找到用处703,
            "name":{string}, // 小一(99)班,
            "schoolCode":{string}, //学校ID test001,
            "weixinId":{string}, //班级微信 20010
        },
    },
    "rtnCode": "0000000",
    "ts": 1481276792761
}
```
#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}
```

## 2.新增老师 
 

> 新增老师  
> 权限管理 1:是 ,0:否
### 接口：
 POST   
>  school/addTeacher?schoolCode=

### 请求参数：

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | --- | ---
 teacherName | string | 新老师姓名   |  true   | --- | ---
 phoneNum | string | 老师手机   |  true   | --- | ---
 teacherJob | string | 老师是否为管理员   |  true   | --- | ---
 clazzMaster | string | 是否为班主任   |  false   | '0' | ---
 email | string |  老师邮箱   |  false   | --- | ---
 deptIds | string | 所属部门ID  |  false   | --- | ---
 classCodes | array | 带班列表   |  false   | --- | 带班ID数组
 weixinid | string | 老师微信   |  false   | --- | ---
 pointadmin | string | 积分管理   |  false   | '0' | 积分活动


### 响应：

>  响应格式：JSON

#### 成功：200 
```
{
    "bizData": {
        "departmentCode":{string}, //部门编码 20053,
        "email":{string}, //shuan126512@qq.com,
        "name":{string}, // 陈水中,
        "phone":{string}, // 13854659303,
        "schoolCode":{string}, //学校编码test001,
        "teacherJob": {string}, //是否管理员 eg:1,
        "uid":{string}, //教师ID 5f71925a9a1a4bac9898ca2e7362532d,
        "teaches": [
            {
                "isMaster":{number}, //所教班是否班主任 1为是,
                "classInfo": {  //班级信息 由于前端无进一步处理需要可以删除
                    "classInfo": {},
                    "grade": {},
                    "school": {},
                },
            }
            
        ]
        
    },
    "rtnCode": "0000000",
    "ts": 1481517035483
}
```

#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}
```

## 3.删除用户 
 

> 删除用户（包括老师，家长） 

### 接口：
 POST   
>  /addressBook/deleteUser

### 请求参数：

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | --- | ---
 uid | string | 要删除的用户ID串   |  true   | --- | 可改为
 role | string | 参数定义   |  false   | 'tea' | 非批量删除，要带上`role`参数
 stuUserId | string | 学生ID   |  false   | --- | `role`为'par'时需带上孩子的id
 

### 响应：

>  响应格式：JSON

#### 成功：200 
```
{
    "bizData": {
        "b": true
    },
    "rtnCode": "0000000",
    "ts": 1481539963314
}
```


#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}
```

## 3.查询个人详细信息
 

> 查询个人详细信息（包括老师，家长） 

### 接口：
 POST   
>  /addressBook/getUserDetail

### 请求参数：

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | --- | ---
 uid | string | 要查询的用户ID   |  true   | --- | ---
 teachParentFlag | string |  角色类型  |  true   | --- | 类型为3是双角色 2教师 1家长
 synchro | string | 学生ID   |  false   | '1' | 未知用途
 

### 响应：

>  响应格式：JSON

#### 成功：200 
```
{
    "bizData": {
        "childrenInfo": [ //家长特有
            {
                "classWeixinId": "1449647160779711",
                "relationCode":{string}, //亲属关系"51" 
                "studentName": "刘毅5",
                "studentNo":{string}, //学生学号 "14496471607153646"
                "uid": "ffcdaedaad0511e58635fa163e0e90d3"
            },
            ...
        ],
        "classInfo": [ //教师特有
            "一年级小一(99)班[小一(991)班]",
            "一年级小一(98)班",
            "一年级小一(9)班[测试班]",
            ...
        ],
        "deptInfo": [ //所属部门
            "管理员",   
             ...
        ],
        "clazzMaster":{string}, //班主任 ""
        "userInfo": {
            "avatar":{string}, //用户头像url
            "department": [ //部门编码
                20009
            ],
            "errcode": "0",
            "errmsg": "ok",
            "extattr": {
                "attrs": []
            },
            "gender": "2",
            "mobile": "13702353628",
            "name": "黄敏仪",
            "pointadmin": 0,
            "position": "教师",
            "status": "1",
            "teachParentFlag":{string}, //角色类型 "2"
            "teacherJob":{string}, // "2",
            "userid": "92fc8738b83811e58635fa163e0e90d3"
        }
    },
    "rtnCode": "0000000",
    "ts": 1481593910042
}
```

#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}
```