# 通信录树状列表操作接口


## 1.获取学校人员树形接口

> 根据获取的schoolCode获取学校通讯录人员树形图名单

### 接口:
POST
> /addressBook/queryAddressBookLocal

### 请求参数:

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | "" | 根据值查询人员名单
 

### 响应:

>  响应格式：JSON

#### 成功：200 
```
{
    bizData:[
        {
            "departmentType":{string}, //部门等级 eg：1 
            "id":{string}, //test001
            "name":{string}, //测试学校
            "order":{string}, //其他类别 未知用处 eg: 1
            "parentid":{string}, //所属父级id eg: 0
        },
        {
            "departmentType":{string}, //部门等级 eg：2
            "id":{string}, //10000,
            "name":{string}, //老师,
            "order":{string}, //其他类别 未知用处 eg:1,
            "parentid": {string}, //所属父级id eg:test001
        },
        {
            "clazzAlias": {string}, //班级别名 eg:管理员,
            "departmentType": {string}, //部门等级 eg：2
            "id": {string}, //20009,
            "name": {string}, //管理员,
            "order": {string}, //其他类别 未知用处 eg:20009,
            "parentid":{string}, //所属父级id eg:10000
        },
        {
            "departmentType": {string}, //部门等级 eg：3,
            "id":{string}, //20000,
            "name":{string}, //家长,
            "order": {string}, //其他类别 未知用处 eg:20000,
            "parentid": {string}, //所属父级id eg:test001
        },
        ...
    ],
    rtnCode:{string}, //000000
    ts:{number}//1481264709800
}
```
 
```
graph LR
学校-->老师
老师-->音乐老师/管理员
学校-->家长
家长-->年级
年级-->班级

```
#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}
```

## 2.添加子分组接口

>  通信录树状增加新子分组

### 接口:
POST
> /addressBook/insertDepartment

### 请求参数:

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | "" | 根据值查询人员名单
 parentid | string |  父级ID   |  true   | --- | ---
 name | string | 子分组名   |  true   | --- | ---
 clazzAlias | string | 班级别名   |  false   | --- | 只有添加班级分组有
 

### 响应:

>  响应格式：JSON

#### 成功：200 
```
{
    "bizData": {
        "clazzAlias":{string}, // ""
        "id":{string}, // "30002"
        "name":{string}, // "234"
        "parentid":{string} // "10000"
    },
    "rtnCode": "0000000",
    "ts": 1481601262751
}
```
#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}
```


## 3.重命名子分组接口

>  通信录树状重命名新子分组

### 接口:
POST
> /addressBook/updateDepartmentName

### 请求参数:

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | "" | 根据值查询人员名单
 parentid | string |  父级ID   |  true   | --- | ---
 name | string | 子分组名   |  true   | --- | ---
 id | string | 节点ID   |  true   | --- | ---
 clazzAlias | string | 班级别名   |  false   | --- | 只有添加班级分组有
 

### 响应:

>  响应格式：JSON

#### 成功：200 
```
{
   "bizData": {
        "clazzAlias":{string}, // ""
        "id":{string}, // "20078"
        "name":{string}, // "行政办公室1",
        "parentid":{string} // "10000"
    },
    "rtnCode": "0000000",
    "ts": 1481602909225
}
```
#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}
```



## 4.删除子分组接口

>  通信录树状删除新子分组

### 接口:
POST
> /school/deleteClass

### 请求参数:

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | "" | 根据值查询人员名单
 parentid | string |  父级ID   |  true   | --- | ---
 departmentType | string | 部门类型   |  true   | --- | ---
 weiXinId | string | 微信ID   |  true   | --- | ---
 

### 响应:

>  响应格式：JSON

#### 成功：200 
```
{
    "bizData": {
        "msg":"删除成功"
    },
    "rtnCode": "0000000",
    "ts": 1481601262751
}
```
#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}

