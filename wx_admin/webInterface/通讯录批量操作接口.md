# 通讯录批量操作接口

## 1.通讯录查询批量导入

>  查询批量导入表单数据

### 接口:
POST
> /addressBook/queryDataImpstatus

### 请求参数:

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | "" | 根据值查询名单
 pageSize | string |  当页数量   |  true   | --- | 当页显示条数数量
 page | string | 当前页数   |  true   | --- | 当前页数

 

### 响应:

>  响应格式：JSON

#### 成功：200 
```
{
    "bizData": {
        "conditions": {},
        "page":{string},//当前页 1
        "pagesize":{string},//当前页数 10
        "records":{string},//总条数 70
        "total":{string},//总页数 7
        "rows": [
            {
                "createDateAsDate": 1481616560490,
                "createTime":{number}, //上传时间 1477017119000,
                "difResultUrl":{string}, //对比文件Execl链接 "dataimp/20161021/parent/dif_1477017119817_937.xlsx",
                "downUrl": "dataimp/parent/1477017119817_937.xlsx",
                "id":{number}, //条目ID 26265,
                "impResultUrl":{string}, //结果文件Execl链接 "dataimp/20161021/parent/1477017119817_937.xlsx",
                "lastModDate": 1481616560487,
                "lastModDateAsDate": 1481616560487,
                "name":{string}, //显示的文件名 "parentdemo.xlsx",
                "newFileName":{string}, //真实的文件名 "1477017119817_937.xlsx",
                "schoolCode": "test001",
                "srcUrl":{string}, //原始Execl链接 "dataimp/parent/1477017119817_937.xlsx"
                "state":{string}, //处理的状态 2
                "tranType":{string}, //导入类型 "parent"
                "uid":{string}, //应该是操作人ID "269"
                "uniqueSeq":{string}, //唯一编码 "1477017119817_937"
            },
            ...
        ]
    },
    "rtnCode": "0000000",
    "ts": 1481616560490
}
```

#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}
```
## 2.通讯录批量导入

>  导入Execl

### 接口:
POST
> /addressBook/importFileNew?schoolCode=&importType=

### 请求参数:

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | "" | 根据值查询名单
 importType | string |  上传类型   |  true   | --- | ---

 

### 响应:

>  响应格式：JSON

#### 成功：200 
```
{
    "bizData": {
        "code":{string},//处理状态码 "1"
        "msg": "文件已上传成功，等待后台执行处理，请稍后"
    },
    "rtnCode": "0000000",
    "ts": 1481618130502
}
```
## 3.通讯录查询批量调班

>  查询批量调班表单数据

### 接口:
POST
> /addressBook/queryAsyncTaskStatus

### 请求参数:

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | "" | 根据值查询名单
 pageSize | string |  当页数量   |  true   | --- | 当页显示条数数量
 page | string | 当前页数   |  true   | --- | 当前页数
 dataType | string | 数据类别   |  true   | "stuClassChange" | ---
    

### 响应:

>  响应格式：JSON

#### 成功：200 
```
{
    "bizData": {
        "conditions": {},
        "page":{string},//当前页 1
        "pagesize":{string},//当前页数 10
        "records":{string},//总条数 70
        "total":{string},//总页数 7
        "rows": [
           {
                "createDateAsDate": 1481618485400,
                "createTime":{string},//创建时间  1481618478000,
                "creator":{string},//上传人 "a13415334594",
                "dataType": "stuClassChange",
                "fileName":{string},//显示文件名 "classchangedemo.xlsx",
                "id":{string},//条目ID 4420,
                "impResultUrl":{string},//结果文件链接 "dataimp/20161213/stuClassChange/1481618478443_220.xlsx",
                "lastModDate": 1481618485400,
                "lastModDateAsDate": 1481618485400,
                "newFileName": "1481618478443_220.xlsx",
                "schoolCode": "test001",
                "srcDownUrl":{string},//原始文件链接 "dataimp/stuClassChange/1481618478443_220.xlsx",
                "state":{string},//处理状态 1 处理中  2 处理成功 3 处理失败,
                "uid":{string},//上传人ID  "504",
                "uniqueSeq":{string},//唯一编码 "1481618478443_220"
            },
            ...
        ]
    },
    "rtnCode": "0000000",
    "ts": 1481616560490
}
```

#### 失败：400
```
{
    msg：{string}//参数错误说明
    rtnCode:{string}, //1110000
    ts:{number}//1481264709800
}
```
## 3.通讯录批量调班

>  导入Execl

### 接口:
POST
> /addressBook/importAsyncTask?schoolCode=&dataType=

### 请求参数:

 名称 | 类型 | 定义 | 必需 | 默认值 | 说明
---|---|---|---|---|---|
 schoolCode | string | 学校编码   |  true   | "" | 根据值查询名单
 dataType | string |  上传类型   |  true   | --- | 默认stuClassChange

 

### 响应:

>  响应格式：JSON

#### 成功：200 
```
{
    "bizData": {
        "code":{string},//处理状态码 "1"
        "msg": "文件已上传成功，等待后台执行处理，请稍后"
    },
    "rtnCode": "0000000",
    "ts": 1481618130502
}
```
