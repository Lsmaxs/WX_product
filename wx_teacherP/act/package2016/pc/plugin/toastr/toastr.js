define(function(require,exports,module){var a=require("jquery");module.exports=function(a){return function(){var b,c,d,e=0,f={error:"error",info:"info",success:"success",warning:"warning"},g={clear:n,remove:o,error:h,getContainer:i,info:j,options:{},subscribe:k,success:l,version:"2.1.2",warning:m};return g;function h(a,b,c){return u({type:f.error,iconClass:v().iconClasses.error,message:a,optionsOverride:c,title:b})}function i(c,d){return c||(c=v()),b=a("#"+c.containerId),b.length?b:(d&&(b=r(c)),b)}function j(a,b,c){return u({type:f.info,iconClass:v().iconClasses.info,message:a,optionsOverride:c,title:b})}function k(a){c=a}function l(a,b,c){return u({type:f.success,iconClass:v().iconClasses.success,message:a,optionsOverride:c,title:b})}function m(a,b,c){return u({type:f.warning,iconClass:v().iconClasses.warning,message:a,optionsOverride:c,title:b})}function n(a,c){var d=v();b||i(d),q(a,d,c)||p(d)}function o(c){var d=v();return b||i(d),c&&0===a(":focus",c).length?void w(c):void(b.children().length&&b.remove())}function p(c){for(var d=b.children(),e=d.length-1;e>=0;e--)q(a(d[e]),c)}function q(b,c,d){var e=d&&d.force?d.force:!1;return b&&(e||0===a(":focus",b).length)?(b[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){w(b)}}),!0):!1}function r(c){return b=a("<div/>").attr("id",c.containerId).addClass(c.positionClass).attr("aria-live","polite").attr("role","alert"),b.appendTo(a(c.target)),b}function s(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function t(a){c&&c(a)}function u(c){var f=v(),g=c.iconClass||f.iconClass;if("undefined"!=typeof c.optionsOverride&&(f=a.extend(f,c.optionsOverride),g=c.optionsOverride.iconClass||g),!D(f,c)){e++,b=i(f,!0);var h=null,j=a("<div/>"),k=a("<div/>"),l=a("<div/>"),m=a("<div/>"),n=a(f.closeHtml),o={intervalId:null,hideEta:null,maxHideTime:null},p={toastId:e,state:"visible",startTime:new Date,options:f,map:c};return r(),u(),s(),t(p),f.debug&&console&&console.log(p),j;function q(a){return null==a&&(a=""),new String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(){x(),z(),A(),B(),C(),y()}function s(){j.hover(G,F),!f.onclick&&f.tapToDismiss&&j.click(E),f.closeButton&&n&&n.click(function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&a.cancelBubble!==!0&&(a.cancelBubble=!0),E(!0)}),f.onclick&&j.click(function(a){f.onclick(a),E()})}function u(){j.hide(),j[f.showMethod]({duration:f.showDuration,easing:f.showEasing,complete:f.onShown}),f.timeOut>0&&(h=setTimeout(E,f.timeOut),o.maxHideTime=parseFloat(f.timeOut),o.hideEta=(new Date).getTime()+o.maxHideTime,f.progressBar&&(o.intervalId=setInterval(H,10)))}function x(){c.iconClass&&j.addClass(f.toastClass).addClass(g)}function y(){f.newestOnTop?b.prepend(j):b.append(j)}function z(){c.title&&(k.append(f.escapeHtml?q(c.title):c.title).addClass(f.titleClass),j.append(k))}function A(){c.message&&(l.append(f.escapeHtml?q(c.message):c.message).addClass(f.messageClass),j.append(l))}function B(){f.closeButton&&(n.addClass("toast-close-button").attr("role","button"),j.prepend(n))}function C(){f.progressBar&&(m.addClass("toast-progress"),j.prepend(m))}function D(a,b){if(a.preventDuplicates){if(b.message===d)return!0;d=b.message}return!1}function E(b){var c=b&&f.closeMethod!==!1?f.closeMethod:f.hideMethod,d=b&&f.closeDuration!==!1?f.closeDuration:f.hideDuration,e=b&&f.closeEasing!==!1?f.closeEasing:f.hideEasing;return!a(":focus",j).length||b?(clearTimeout(o.intervalId),j[c]({duration:d,easing:e,complete:function(){w(j),f.onHidden&&"hidden"!==p.state&&f.onHidden(),p.state="hidden",p.endTime=new Date,t(p)}})):void 0}function F(){(f.timeOut>0||f.extendedTimeOut>0)&&(h=setTimeout(E,f.extendedTimeOut),o.maxHideTime=parseFloat(f.extendedTimeOut),o.hideEta=(new Date).getTime()+o.maxHideTime)}function G(){clearTimeout(h),o.hideEta=0,j.stop(!0,!0)[f.showMethod]({duration:f.showDuration,easing:f.showEasing})}function H(){var a=(o.hideEta-(new Date).getTime())/o.maxHideTime*100;m.width(a+"%")}}}function v(){return a.extend({},s(),g.options)}function w(a){b||(b=i()),a.is(":visible")||(a.remove(),a=null,0===b.children().length&&(b.remove(),d=void 0))}}()}(a)});